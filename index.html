<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pictionary — French Monuments</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #f4f7fb;
      margin: 0;
      padding: 20px;
    }
    h1 {
      margin-bottom: 20px;
    }
    .container {
      display: flex;
      gap: 20px;
      width: 95%;
      max-width: 1200px;
    }
    .reference, .drawing {
      flex: 1;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .reference img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    canvas {
      border: 2px solid #ccc;
      border-radius: 10px;
      width: 100%;
      height: 500px;
      cursor: crosshair;
    }
    .controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    button {
      padding: 8px 14px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover {
      background: #1d4ed8;
    }
    #score {
      font-weight: bold;
      margin-top: 10px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>Pictionary — French Monuments</h1>
  <div class="container">
    <div class="reference">
      <h3 id="reference-title">Reference — </h3>
      <img id="reference-img" src="" alt="Reference Monument">
      <div class="controls">
        <button onclick="newTopic()">New Topic</button>
        <button onclick="clearCanvas()">Clear</button>
      </div>
    </div>
    <div class="drawing">
      <canvas id="canvas"></canvas>
      <div class="controls">
        <label>Brush: <input type="range" id="brush-size" min="1" max="20" value="3"></label>
        <label>Opacity: <input type="range" id="brush-opacity" min="0.1" max="1" step="0.1" value="1"></label>
        <button onclick="undo()">Undo</button>
        <button onclick="redo()">Redo</button>
      </div>
      <p id="score">Score: 50/100</p>
    </div>
  </div>

  <script>
    const topics = [
      { name: "Eiffel Tower", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Tour_Eiffel_Wikimedia_Commons.jpg/800px-Tour_Eiffel_Wikimedia_Commons.jpg" },
      { name: "Louvre Museum", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Louvre_Museum_Wikimedia_Commons.jpg/800px-Louvre_Museum_Wikimedia_Commons.jpg" },
      { name: "Palace of Versailles", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Versailles_Palace_Wikimedia_Commons.jpg/800px-Versailles_Palace_Wikimedia_Commons.jpg" },
      { name: "Mont Saint-Michel", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Mont_Saint-Michel_Wikimedia_Commons.jpg/800px-Mont_Saint-Michel_Wikimedia_Commons.jpg" },
      { name: "Arc de Triomphe", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6e/Arc_de_Triomphe_Wikimedia_Commons.jpg/800px-Arc_de_Triomphe_Wikimedia_Commons.jpg" }
    ];

    let canvas = document.getElementById("canvas");
    let ctx = canvas.getContext("2d");
    let drawing = false;
    let history = [], redoStack = [];

    function resizeCanvas() {
      canvas.width = canvas.clientWidth;
      canvas.height = canvas.clientHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    canvas.addEventListener("mousedown", () => { drawing = true; ctx.beginPath(); });
    canvas.addEventListener("mouseup", () => { drawing = false; history.push(ctx.getImageData(0,0,canvas.width,canvas.height)); redoStack=[]; });
    canvas.addEventListener("mousemove", draw);

    function draw(e) {
      if (!drawing) return;
      ctx.lineWidth = document.getElementById("brush-size").value;
      ctx.globalAlpha = document.getElementById("brush-opacity").value;
      ctx.lineCap = "round";
      ctx.strokeStyle = "black";
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
      updateScore();
    }

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      updateScore(true);
    }

    function undo() {
      if (history.length > 0) {
        redoStack.push(history.pop());
        if (history.length > 0) {
          ctx.putImageData(history[history.length - 1], 0, 0);
        } else {
          clearCanvas();
        }
      }
    }

    function redo() {
      if (redoStack.length > 0) {
        let data = redoStack.pop();
        history.push(data);
        ctx.putImageData(data, 0, 0);
      }
    }

    function newTopic() {
      const random = topics[Math.floor(Math.random() * topics.length)];
      document.getElementById("reference-title").innerText = "Reference — " + random.name;
      document.getElementById("reference-img").src = random.img;
      clearCanvas();
    }

    function updateScore(reset = false) {
      let score = reset ? 50 : Math.min(100, 50 + Math.floor(Math.random() * 51));
      document.getElementById("score").innerText = "Score: " + score + "/100";
    }

    newTopic(); // Load first topic
  </script>
</body>
</html>
