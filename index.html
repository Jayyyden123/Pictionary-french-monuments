<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pictionary — French Monuments</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f8fc;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      background: #1e293b;
      color: white;
      width: 100%;
      padding: 15px;
      text-align: center;
      font-size: 1.4rem;
      font-weight: bold;
    }

    .container {
      display: flex;
      width: 95%;
      margin-top: 20px;
      gap: 20px;
    }

    .left-panel {
      flex: 1;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .reference-img {
      width: 100%;
      height: 250px;
      object-fit: contain;
      border-radius: 8px;
      background: #f0f0f0;
      margin-bottom: 10px;
    }

    .buttons {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    button {
      padding: 8px 14px;
      background: #2563eb;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background: #1e40af;
    }

    .right-panel {
      flex: 2;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #drawing-canvas {
      border: 2px solid #ccc;
      border-radius: 8px;
      background: #fff;
      width: 100%;
      height: 500px;
      cursor: crosshair;
    }

    .controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .score-box {
      margin-top: 10px;
      font-size: 1.2rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>Pictionary — French Monuments</header>

  <div class="container">
    <div class="left-panel">
      <h3 id="topic-title">Reference (preview)</h3>
      <img id="reference-image" class="reference-img" src="" alt="Reference Monument" />
      <div class="buttons">
        <button onclick="newTopic()">New Topic</button>
        <button onclick="clearCanvas()">Clear</button>
        <button onclick="downloadDrawing()">Download</button>
      </div>
    </div>

    <div class="right-panel">
      <canvas id="drawing-canvas"></canvas>
      <div class="controls">
        <label>Brush: <input type="range" id="brush-size" min="1" max="20" value="3" /></label>
        <label>Opacity: <input type="range" id="brush-opacity" min="0.1" max="1" step="0.1" value="1" /></label>
        <button onclick="undo()">Undo</button>
        <button onclick="redo()">Redo</button>
      </div>
      <div class="score-box">
        Score: <span id="score-display">50/100</span>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("drawing-canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;

    let drawing = false;
    let paths = [];
    let undone = [];

    const topics = [
      {
        name: "Eiffel Tower",
        img: "https://upload.wikimedia.org/wikipedia/commons/a/a8/Tour_Eiffel_Wikimedia_Commons.jpg"
      },
      {
        name: "Louvre Museum",
        img: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Louvre_Museum_Wikimedia_Commons.jpg"
      },
      {
        name: "Arc de Triomphe",
        img: "https://upload.wikimedia.org/wikipedia/commons/6/6d/Arc_de_Triomphe%2C_Paris_21_October_2010.jpg"
      },
      {
        name: "Notre-Dame Cathedral",
        img: "https://upload.wikimedia.org/wikipedia/commons/a/a6/Notre_Dame_de_Paris_2013.jpg"
      },
      {
        name: "Palace of Versailles",
        img: "https://upload.wikimedia.org/wikipedia/commons/4/43/Palace_of_Versailles_West_facade.jpg"
      }
    ];

    function startDrawing(e) {
      drawing = true;
      ctx.beginPath();
      ctx.moveTo(e.offsetX, e.offsetY);
      paths.push([{ x: e.offsetX, y: e.offsetY }]);
    }

    function draw(e) {
      if (!drawing) return;
      const brushSize = document.getElementById("brush-size").value;
      const brushOpacity = document.getElementById("brush-opacity").value;

      ctx.lineWidth = brushSize;
      ctx.strokeStyle = `rgba(0,0,0,${brushOpacity})`;
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();

      paths[paths.length - 1].push({ x: e.offsetX, y: e.offsetY });
    }

    function stopDrawing() {
      drawing = false;
      ctx.closePath();
    }

    canvas.addEventListener("mousedown", startDrawing);
    canvas.addEventListener("mousemove", draw);
    canvas.addEventListener("mouseup", stopDrawing);
    canvas.addEventListener("mouseleave", stopDrawing);

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      paths = [];
      undone = [];
    }

    function undo() {
      if (paths.length > 0) {
        undone.push(paths.pop());
        redraw();
      }
    }

    function redo() {
      if (undone.length > 0) {
        paths.push(undone.pop());
        redraw();
      }
    }

    function redraw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let path of paths) {
        ctx.beginPath();
        for (let i = 0; i < path.length; i++) {
          const point = path[i];
          if (i === 0) ctx.moveTo(point.x, point.y);
          else ctx.lineTo(point.x, point.y);
        }
        ctx.stroke();
      }
    }

    function downloadDrawing() {
      const link = document.createElement("a");
      link.download = "drawing.png";
      link.href = canvas.toDataURL();
      link.click();
    }

    function newTopic() {
      const random = topics[Math.floor(Math.random() * topics.length)];
      document.getElementById("reference-image").src = random.img;
      document.getElementById("topic-title").textContent = "Reference — " + random.name;
    }

    // Fake scoring function
    function calculateScore(similarity) {
      let score = Math.round(similarity * 100);
      if (score < 50) score = 50; // enforce minimum
      document.getElementById("score-display").textContent = `${score}/100`;
    }

    // Example: simulate a score update
    setInterval(() => {
      let randomSim = Math.random(); // 0-1
      calculateScore(randomSim);
    }, 5000);

    // Initialize with a topic
    newTopic();
  </script>
</body>
</html>
